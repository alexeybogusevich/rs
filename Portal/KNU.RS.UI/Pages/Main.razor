@page "/main"
@using KNU.RS.Logic.Models.Patient
@using KNU.RS.Logic.Services.PatientService
@inject IPatientService patientService

<AuthorizeView Roles="Admin,Doctor,Patient">
    <Authorized>
        <PatientsTable Patients="Patients" />
    </Authorized>
</AuthorizeView>

@code {
    private List<PatientInfo> Patients { get; set; } = new List<PatientInfo>();

    protected override async Task OnInitializedAsync()
    {
        var patients = await patientService.GetInfoAsync();
        Patients = patients?.ToList();
    }
}
